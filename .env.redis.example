# ==============================================
# HAIDA - Redis Configuration
# ==============================================
#
# Redis se usa para:
# - Cache de respuestas API
# - Sessions storage
# - Rate limiting
# - Queue de jobs
# - Pub/Sub para realtime features
#

# ==============================================
# Opción 1: Upstash (Recomendado para producción)
# ==============================================
# Serverless Redis, ideal para Vercel
# 1. Crear cuenta: https://upstash.com
# 2. Crear database Redis
# 3. Copiar REST URL y Token
#
# REDIS_URL=https://your-redis.upstash.io
# REDIS_TOKEN=AbCdEfGhIjKlMnOpQrStUvWxYz1234567890
# REDIS_REST_URL=https://your-redis.upstash.io
# REDIS_REST_TOKEN=AbCdEfGhIjKlMnOpQrStUvWxYz1234567890

# ==============================================
# Opción 2: Redis Cloud
# ==============================================
# 1. Crear cuenta: https://redis.com/try-free
# 2. Crear database
# 3. Obtener connection string
#
# REDIS_URL=redis://default:password@endpoint.cloud.redislabs.com:16379

# ==============================================
# Opción 3: Local Redis (desarrollo)
# ==============================================
# Requiere instalar Redis localmente:
# macOS: brew install redis && brew services start redis
# Linux: sudo apt-get install redis-server
# Windows: https://redis.io/docs/getting-started/installation/install-redis-on-windows/
#
REDIS_URL=redis://localhost:6379

# ==============================================
# Opción 4: Railway (fácil y gratuito)
# ==============================================
# 1. Crear cuenta: https://railway.app
# 2. New Project → Add Redis
# 3. Copiar REDIS_URL
#
# REDIS_URL=redis://default:password@containers-us-west-xx.railway.app:6379

# ==============================================
# Configuración de Cache
# ==============================================
# TTL (Time To Live) por defecto en segundos
REDIS_DEFAULT_TTL=3600

# TTL para diferentes tipos de cache
REDIS_TTL_API_RESPONSE=300
REDIS_TTL_USER_SESSION=86400
REDIS_TTL_PROJECT_DATA=1800
REDIS_TTL_TEST_RESULTS=3600

# ==============================================
# Rate Limiting
# ==============================================
# Límite de requests por minuto
RATE_LIMIT_PER_MINUTE=60

# Límite de requests por hora
RATE_LIMIT_PER_HOUR=1000

# ==============================================
# Queue Configuration
# ==============================================
# Cola para jobs en background
REDIS_QUEUE_NAME=haida:jobs

# Max intentos para jobs fallidos
REDIS_MAX_JOB_ATTEMPTS=3

# Timeout para jobs (ms)
REDIS_JOB_TIMEOUT=300000

# ==============================================
# Pub/Sub para Realtime
# ==============================================
# Canales para actualizaciones en tiempo real
REDIS_CHANNEL_TEST_UPDATES=haida:test-updates
REDIS_CHANNEL_PROJECT_UPDATES=haida:project-updates
REDIS_CHANNEL_USER_NOTIFICATIONS=haida:notifications

# ==============================================
# Debugging y Logging
# ==============================================
# Habilitar logs de Redis
REDIS_ENABLE_LOGGING=false

# Habilitar métricas de cache
REDIS_ENABLE_METRICS=true
